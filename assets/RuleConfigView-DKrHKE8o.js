import{d as re,r as c,s as F,c as n,a as e,t as p,x as oe,k as u,v as y,y as R,z as te,e as m,o as d,m as P,i as Ae,b as g,g as I,w as Ce,h as he,F as $,j as M,A as Ue,p as Pe,u as Ke}from"./vendor-z8y3CHRY.js";import{p as Ve,g as $e,_ as Me,P as Ee}from"./ProviderSelector.vue_vue_type_script_setup_true_lang-DZ7U_8RF.js";import{r as k}from"./__vite-browser-external-B0SjubpB.js";import"./index-D_Uoz42J.js";const Te={class:"bg-white dark:bg-gray-800 border rounded-lg p-6 text-gray-900 dark:text-gray-100"},Ie={class:"flex items-center justify-between mb-4"},Fe={class:"text-lg font-semibold"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={class:"border-t pt-4 border-gray-200 dark:border-gray-700"},Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Le={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4"},He={class:"flex items-center"},Be={class:"flex items-center"},De={class:"border-t pt-4 border-gray-200 dark:border-gray-700"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ze={class:"mt-4"},qe={class:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Xe={class:"border-t pt-4"},Oe={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700"},Qe={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},Ye=re({__name:"RuleEditor",props:{rule:{},isEditing:{type:Boolean,default:!1}},emits:["save","close"],setup(j,{emit:E}){const U=j,x=E,r=c({name:"",description:"",peer:"",item:"",type:"支出",method:"",category:"",txType:"",time:"",minPrice:void 0,maxPrice:void 0,fullMatch:!1,sep:",",ignore:!1,targetAccount:"",methodAccount:"",cashAccount:"",positionAccount:"",commissionAccount:"",pnlAccount:"",tags:[]}),w=c(""),A=()=>{r.value={name:"",description:"",peer:"",item:"",type:"支出",method:"",category:"",txType:"",time:"",minPrice:void 0,maxPrice:void 0,fullMatch:!1,sep:",",ignore:!1,targetAccount:"",methodAccount:"",cashAccount:"",positionAccount:"",commissionAccount:"",pnlAccount:"",tags:[]},w.value=""};F(()=>U.rule,i=>{var o;i?(r.value={name:i.name,description:i.description||"",peer:i.peer||"",item:i.item||"",type:i.type||"",method:i.method||"",category:i.category||"",txType:i.txType||"",time:i.time||"",minPrice:i.minPrice,maxPrice:i.maxPrice,fullMatch:i.fullMatch||!1,sep:i.sep||"",ignore:i.ignore||!1,targetAccount:i.targetAccount||"",methodAccount:i.methodAccount||"",cashAccount:i.cashAccount||"",positionAccount:i.positionAccount||"",commissionAccount:i.commissionAccount||"",pnlAccount:i.pnlAccount||"",tags:i.tags||[]},w.value=((o=i.tags)==null?void 0:o.join(", "))||""):A()},{immediate:!0});const h=()=>{r.value.tags=w.value.split(",").map(i=>i.trim()).filter(i=>i.length>0)},C=()=>{var o;const i={id:((o=U.rule)==null?void 0:o.id)||Date.now().toString(),name:r.value.name,description:r.value.description||"",peer:r.value.peer||"",item:r.value.item||"",type:r.value.type||"",method:r.value.method||"",category:r.value.category||"",txType:r.value.txType||"",time:r.value.time||"",minPrice:r.value.minPrice,maxPrice:r.value.maxPrice,fullMatch:r.value.fullMatch,sep:r.value.sep||"",ignore:r.value.ignore,targetAccount:r.value.targetAccount||"",methodAccount:r.value.methodAccount||"",cashAccount:r.value.cashAccount||"",positionAccount:r.value.positionAccount||"",commissionAccount:r.value.commissionAccount||"",pnlAccount:r.value.pnlAccount||"",tags:r.value.tags,priority:1};x("save",i),A()};return(i,o)=>(d(),n("div",Te,[e("div",Ie,[e("h3",Fe,p(i.isEditing?"编辑规则":"新增规则"),1),e("button",{onClick:o[0]||(o[0]=l=>i.$emit("close")),class:"text-gray-400 hover:text-gray-600"},o[23]||(o[23]=[e("span",{class:"material-icons"},"close",-1)]))]),e("form",{onSubmit:oe(C,["prevent"]),class:"space-y-4"},[e("div",Re,[e("div",null,[o[24]||(o[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"规则名称",-1)),u(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>r.value.name=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"输入规则名称",required:""},null,512),[[y,r.value.name]])]),e("div",null,[o[25]||(o[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"描述",-1)),u(e("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>r.value.description=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"规则描述（可选）"},null,512),[[y,r.value.description]])])]),e("div",je,[o[39]||(o[39]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-200 mb-3"},"匹配条件",-1)),e("div",Se,[e("div",null,[o[26]||(o[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"交易对方 (peer)",-1)),u(e("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>r.value.peer=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"交易对方名称"},null,512),[[y,r.value.peer]])]),e("div",null,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"商品说明 (item)",-1)),u(e("input",{"onUpdate:modelValue":o[4]||(o[4]=l=>r.value.item=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"商品或交易说明"},null,512),[[y,r.value.item]])]),e("div",null,[o[29]||(o[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"交易类型 (type)",-1)),u(e("select",{"onUpdate:modelValue":o[5]||(o[5]=l=>r.value.type=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},o[28]||(o[28]=[e("option",{value:""},"选择类型",-1),e("option",{value:"收入"},"收入",-1),e("option",{value:"支出"},"支出",-1),e("option",{value:"其他"},"其他",-1)]),512),[[R,r.value.type]])]),e("div",null,[o[30]||(o[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"支付方式 (method)",-1)),u(e("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>r.value.method=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"支付方式"},null,512),[[y,r.value.method]])]),e("div",null,[o[31]||(o[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"交易分类 (category)",-1)),u(e("input",{"onUpdate:modelValue":o[7]||(o[7]=l=>r.value.category=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"交易分类"},null,512),[[y,r.value.category]])]),e("div",null,[o[32]||(o[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"交易类型 (txType)",-1)),u(e("input",{"onUpdate:modelValue":o[8]||(o[8]=l=>r.value.txType=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"交易类型"},null,512),[[y,r.value.txType]])]),e("div",null,[o[33]||(o[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"时间范围 (time)",-1)),u(e("input",{"onUpdate:modelValue":o[9]||(o[9]=l=>r.value.time=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"11:00-14:00"},null,512),[[y,r.value.time]])]),e("div",null,[o[34]||(o[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"最小金额",-1)),u(e("input",{"onUpdate:modelValue":o[10]||(o[10]=l=>r.value.minPrice=l),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"最小金额"},null,512),[[y,r.value.minPrice,void 0,{number:!0}]])]),e("div",null,[o[35]||(o[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"最大金额",-1)),u(e("input",{"onUpdate:modelValue":o[11]||(o[11]=l=>r.value.maxPrice=l),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"最大金额"},null,512),[[y,r.value.maxPrice,void 0,{number:!0}]])])]),e("div",Le,[e("div",He,[u(e("input",{"onUpdate:modelValue":o[12]||(o[12]=l=>r.value.fullMatch=l),type:"checkbox",id:"fullMatch",class:"mr-2"},null,512),[[te,r.value.fullMatch]]),o[36]||(o[36]=e("label",{for:"fullMatch",class:"text-sm text-gray-700 dark:text-gray-200"},"精确匹配",-1))]),e("div",Be,[u(e("input",{"onUpdate:modelValue":o[13]||(o[13]=l=>r.value.ignore=l),type:"checkbox",id:"ignore",class:"mr-2"},null,512),[[te,r.value.ignore]]),o[37]||(o[37]=e("label",{for:"ignore",class:"text-sm text-gray-700 dark:text-gray-200"},"忽略此交易",-1))]),e("div",null,[o[38]||(o[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"分隔符 (sep)",-1)),u(e("input",{"onUpdate:modelValue":o[14]||(o[14]=l=>r.value.sep=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:","},null,512),[[y,r.value.sep]])])])]),e("div",De,[o[49]||(o[49]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-200 mb-3"},"账户配置",-1)),e("div",Ne,[e("div",null,[o[40]||(o[40]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"目标账户 (targetAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[15]||(o[15]=l=>r.value.targetAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Expenses:Food"},null,512),[[y,r.value.targetAccount]]),o[41]||(o[41]=e("p",{class:"text-xs text-gray-500 mt-1"},"支出账户，如：Expenses:Food、Expenses:Life:Food:Snack:零食等",-1))]),e("div",null,[o[42]||(o[42]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"支付账户 (methodAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[16]||(o[16]=l=>r.value.methodAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Assets:Alipay"},null,512),[[y,r.value.methodAccount]]),o[43]||(o[43]=e("p",{class:"text-xs text-gray-500 mt-1"},"支付方式账户，如：Assets:Alipay、Liabilities:Life:Huabei:花呗等",-1))])]),e("details",ze,[o[48]||(o[48]=e("summary",{class:"cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-100 flex items-center"},[e("span",{class:"material-icons text-sm mr-1 transition-transform"},"expand_more"),m(" 高级账户设置 ")],-1)),e("div",qe,[e("div",null,[o[44]||(o[44]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"现金账户 (cashAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[17]||(o[17]=l=>r.value.cashAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Assets:Cash"},null,512),[[y,r.value.cashAccount]])]),e("div",null,[o[45]||(o[45]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"持仓账户 (positionAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[18]||(o[18]=l=>r.value.positionAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Assets:Positions"},null,512),[[y,r.value.positionAccount]])]),e("div",null,[o[46]||(o[46]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"手续费账户 (commissionAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[19]||(o[19]=l=>r.value.commissionAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Expenses:Commission"},null,512),[[y,r.value.commissionAccount]])]),e("div",null,[o[47]||(o[47]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"损益账户 (pnlAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[20]||(o[20]=l=>r.value.pnlAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Income:PnL"},null,512),[[y,r.value.pnlAccount]])])])])]),e("div",Xe,[o[52]||(o[52]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-200 mb-3"},"标签",-1)),e("div",null,[o[50]||(o[50]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"标签 (tags)",-1)),u(e("input",{"onUpdate:modelValue":o[21]||(o[21]=l=>w.value=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"标签1,标签2,标签3",onInput:h},null,544),[[y,w.value]]),o[51]||(o[51]=e("p",{class:"text-xs text-gray-500 mt-1"},"使用逗号分隔多个标签",-1))])]),e("div",Oe,[e("button",{type:"button",onClick:o[22]||(o[22]=l=>i.$emit("close")),class:"px-4 py-2 text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600"}," 取消 "),e("button",Qe,p(i.isEditing?"更新":"创建"),1)])],32)]))}}),Ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Je={class:"bg-white shadow-2xl rounded-2xl border border-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 p-10"},We={class:"flex items-center justify-between mb-8"},Ze={class:"mb-8"},_e={key:0,class:"space-y-6"},et={class:"flex items-center justify-between"},tt={class:"text-xl font-semibold"},rt={class:"text-gray-600 dark:text-gray-300"},ot={class:"flex space-x-2"},st={class:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-200 dark:border-blue-700 p-6"},at={class:"text-blue-700 dark:text-blue-300 mb-4"},lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},nt={class:"flex items-center justify-between mb-2"},dt={class:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded"},it={class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-1"},ut={class:"text-xs text-gray-600 dark:text-gray-400"},gt={class:"bg-gray-50 dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-8"},pt={class:"flex items-center justify-between mb-6"},yt={key:0,class:"text-sm text-gray-600 dark:text-gray-300 transition-opacity duration-300"},xt={class:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},bt={key:0},ft={key:1},vt={key:2},kt={key:3},wt={class:"mb-6 bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700"},At={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ct={class:"flex space-x-2"},ht=["title"],Ut={class:"material-icons text-sm"},Pt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Kt={class:"absolute top-3 right-3 flex space-x-1 z-10"},Vt=["onClick"],$t=["onClick"],Mt={class:"pr-16"},Et={class:"flex items-center space-x-2 mb-3"},Tt={class:"font-semibold text-gray-900 dark:text-gray-100 text-lg"},It={key:0,class:"text-xs bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 px-2 py-1 rounded-full font-semibold"},Ft={key:0,class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},Rt={class:"mb-4"},jt={class:"space-y-1.5"},St={key:0,class:"flex items-center text-sm"},Lt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},Ht={key:1,class:"flex items-center text-sm"},Bt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},Dt={key:2,class:"flex items-center text-sm"},Nt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium"},zt={key:3,class:"flex items-center text-sm"},qt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},Xt={key:4,class:"flex items-center text-sm"},Ot={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},Qt={key:5,class:"flex items-center text-sm"},Yt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},Gt={key:6,class:"flex items-center text-sm"},Jt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium"},Wt={key:7,class:"flex items-center text-sm"},Zt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium"},_t={class:"mb-4"},er={class:"space-y-1.5"},tr={key:0,class:"flex items-center text-sm"},rr={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},or={key:1,class:"flex items-center text-sm"},sr={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},ar={key:2,class:"flex items-center text-sm"},lr={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},nr={key:3,class:"flex items-center text-sm"},dr={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},ir={key:4,class:"flex items-center text-sm"},ur={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},gr={key:5,class:"flex items-center text-sm"},pr={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},yr={key:1,class:"mb-4"},xr={class:"flex flex-wrap gap-2"},mr={key:0,class:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded text-xs font-semibold"},cr={key:1,class:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 rounded text-xs font-semibold"},br={key:2,class:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 rounded text-xs font-semibold"},fr={key:2},vr={class:"flex flex-wrap gap-1"},kr={key:0,class:"text-center py-8"},wr={class:"text-gray-600 dark:text-gray-300"},Ar={key:1,class:"text-center py-12"},Cr={key:2,class:"text-center py-12"},hr={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ur={class:"max-w-4xl w-full mx-4 max-h-screen overflow-y-auto"},Pr={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Kr={class:"bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto border border-gray-200 dark:bg-gray-800 dark:border-gray-700"},Vr={class:"flex items-center justify-between mb-6"},$r={class:"space-y-2"},Mr=["onClick"],Er={class:"flex items-center justify-between"},Tr={class:"font-medium"},Ir={class:"text-sm text-gray-600 dark:text-gray-300"},Fr={class:"flex space-x-2"},Rr=["onClick"],jr={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},Dr=re({__name:"RuleConfigView",setup(j){const E=Pe(),U=Ke(),x=c(null),r=c(null),w=c(!1),A=c(void 0),h=c(!1),C=c(""),i=c(""),o=c("");c(!1);const l=c("asc"),T=c(!1),se=c({ethereum:{apiKey:"",rpcUrl:""},bsc:{apiKey:"",rpcUrl:""},polygon:{apiKey:"",rpcUrl:""},arbitrum:{apiKey:"",rpcUrl:""},optimism:{apiKey:"",rpcUrl:""},avalanche:{apiKey:"",rpcUrl:""},solana:{apiKey:"",rpcUrl:""},bitcoin:{apiKey:"",rpcUrl:""},ethscan:{apiKey:""},tronscan:{apiKey:""}}),K=c("");F([r,x],()=>{x.value==="ethereum"&&r.value&&r.value.apiConfig&&r.value.apiConfig.ethereum&&(K.value=r.value.apiConfig.ethereum.apiKey||"")},{immediate:!0});function S(){x.value==="ethereum"&&r.value&&r.value.apiConfig&&r.value.apiConfig.ethereum&&(r.value.apiConfig.ethereum.apiKey=K.value,v())}const ae=P(()=>Ve),le=P(()=>x.value?$e(x.value):[]),ne=P(()=>r.value?[...r.value.rules]:[]),L=P(()=>x.value?k.getHistory(x.value):[]),H=P(()=>{let a=ne.value.filter(t=>{var f;const b=t.name.toLowerCase().includes(C.value.toLowerCase())||((f=t.description)==null?void 0:f.toLowerCase().includes(C.value.toLowerCase()))||t.tags&&t.tags.some(V=>V.toLowerCase().includes(C.value.toLowerCase())),s=i.value===""||t.type===i.value;return b&&s});return o.value==="name"?a=a.sort((t,b)=>{const s=t.name.localeCompare(b.name);return l.value==="asc"?s:-s}):o.value==="created"&&(a=a.sort((t,b)=>{const s=(t.id||"").localeCompare(b.id||"");return l.value==="asc"?s:-s})),a}),de=a=>{x.value=a},B=()=>{var t,b,s,f,V,N,z,q,X,O,Q,Y,G,J,W,Z,_,ee;if(!x.value)return;const a=k.getConfig(x.value);a&&(a.apiConfig||(a.apiConfig={ethereum:{apiKey:""}}),a.apiConfig.ethereum||(a.apiConfig.ethereum={apiKey:""})),r.value=a,a!=null&&a.apiConfig&&(se.value={ethereum:{apiKey:((t=a.apiConfig.ethereum)==null?void 0:t.apiKey)||"",rpcUrl:((b=a.apiConfig.ethereum)==null?void 0:b.rpcUrl)||""},bsc:{apiKey:((s=a.apiConfig.bsc)==null?void 0:s.apiKey)||"",rpcUrl:((f=a.apiConfig.bsc)==null?void 0:f.rpcUrl)||""},polygon:{apiKey:((V=a.apiConfig.polygon)==null?void 0:V.apiKey)||"",rpcUrl:((N=a.apiConfig.polygon)==null?void 0:N.rpcUrl)||""},arbitrum:{apiKey:((z=a.apiConfig.arbitrum)==null?void 0:z.apiKey)||"",rpcUrl:((q=a.apiConfig.arbitrum)==null?void 0:q.rpcUrl)||""},optimism:{apiKey:((X=a.apiConfig.optimism)==null?void 0:X.apiKey)||"",rpcUrl:((O=a.apiConfig.optimism)==null?void 0:O.rpcUrl)||""},avalanche:{apiKey:((Q=a.apiConfig.avalanche)==null?void 0:Q.apiKey)||"",rpcUrl:((Y=a.apiConfig.avalanche)==null?void 0:Y.rpcUrl)||""},solana:{apiKey:((G=a.apiConfig.solana)==null?void 0:G.apiKey)||"",rpcUrl:((J=a.apiConfig.solana)==null?void 0:J.rpcUrl)||""},bitcoin:{apiKey:((W=a.apiConfig.bitcoin)==null?void 0:W.apiKey)||"",rpcUrl:((Z=a.apiConfig.bitcoin)==null?void 0:Z.rpcUrl)||""},ethscan:{apiKey:((_=a.apiConfig.ethscan)==null?void 0:_.apiKey)||""},tronscan:{apiKey:((ee=a.apiConfig.tronscan)==null?void 0:ee.apiKey)||""}})},ie=()=>{const a=E.query.provider;a&&Object.values(Ee).includes(a)&&(x.value=a,B())},ue=async()=>{if(x.value)try{const a=await k.createFromPreset(x.value,"我的配置");r.value=a,k.saveConfig(a)}catch(a){console.error("Failed to create from preset:",a),alert("创建配置失败")}},ge=()=>{A.value=void 0,w.value=!0},pe=a=>{A.value=a,w.value=!0},ye=a=>{if(!r.value)return;a.id||(a.id=Date.now().toString());const t=r.value.rules.findIndex(b=>b.id===a.id);t>=0?r.value.rules[t]=a:r.value.rules.push(a),k.saveConfig(r.value),alert("规则保存成功！"),D()},xe=a=>{!r.value||!a||confirm("确定要删除这个规则吗？")&&(r.value.rules=r.value.rules.filter(t=>t.id!==a),k.saveConfig(r.value))},D=()=>{w.value=!1,A.value=void 0},me=async()=>{if(!x.value)return;const a=await k.exportToClipboard(x.value);alert(a?"配置已复制到剪贴板！":"导出失败，请重试")},ce=async()=>{const a=await k.importFromClipboard();a?(r.value=a,alert("配置导入成功！")):alert("导入失败，请检查剪贴板内容格式")},be=a=>{const t=k.applyHistory(a);t?(r.value=t,h.value=!1,alert("历史配置应用成功！")):alert("应用历史配置失败")},fe=a=>new Date(a).toLocaleString("zh-CN"),ve=()=>{x.value?U.push({path:"/bill-processing",query:{provider:x.value,from:"rule-config"}}):U.push({path:"/bill-processing",query:{from:"rule-config"}})},ke=a=>{confirm("确定要删除这个历史记录吗？")&&(k.deleteHistory(a)?(h.value=!1,alert("历史记录删除成功！")):alert("删除失败，请重试"))},v=()=>{r.value&&(r.value.apiConfig||(r.value.apiConfig={ethereum:{apiKey:""}}),r.value.apiConfig.ethereum||(r.value.apiConfig.ethereum={apiKey:""}),r.value={...r.value},k.saveConfig(r.value),T.value=!0,setTimeout(()=>{T.value=!1},2e3))},we=()=>{l.value=l.value==="asc"?"desc":"asc"};return F(x,()=>{B()}),Ae(()=>{ie()}),(a,t)=>{const b=he("router-link");return d(),n("div",Ge,[e("div",Je,[e("div",We,[t[17]||(t[17]=e("h1",{class:"text-3xl font-extrabold"},"规则配置",-1)),I(b,{to:"/",class:"inline-flex items-center px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-semibold shadow-md"},{default:Ce(()=>t[16]||(t[16]=[e("span",{class:"material-icons mr-3"},"arrow_back",-1),m(" 返回首页 ")])),_:1,__:[16]})]),e("div",Ze,[t[18]||(t[18]=e("h2",{class:"text-lg font-semibold mb-4"},"选择解析器",-1)),I(Me,{"supported-providers":ae.value,"selected-provider":x.value,onProviderSelected:de},null,8,["supported-providers","selected-provider"])]),x.value&&r.value?(d(),n("div",_e,[e("div",et,[e("div",null,[e("h3",tt,p(r.value.name),1),e("p",rt,p(r.value.description),1)]),e("div",ot,[e("button",{onClick:t[0]||(t[0]=s=>h.value=!0),class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700"},t[19]||(t[19]=[e("span",{class:"material-icons mr-2"},"history",-1),m(" 历史记录 ")])),e("button",{onClick:me,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"},t[20]||(t[20]=[e("span",{class:"material-icons mr-2"},"download",-1),m(" 导出配置 ")])),e("button",{onClick:ce,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},t[21]||(t[21]=[e("span",{class:"material-icons mr-2"},"upload",-1),m(" 导入配置 ")]))])]),e("div",st,[t[23]||(t[23]=e("div",{class:"flex items-center mb-4"},[e("span",{class:"material-icons text-blue-600 dark:text-blue-400 mr-2"},"info"),e("h4",{class:"text-lg font-semibold text-blue-800 dark:text-blue-200"},"字段映射说明")],-1)),e("p",at," 以下是 "+p(x.value)+" 解析器的字段映射关系，帮助您了解原始表格字段如何映射到规则匹配字段： ",1),e("div",lt,[(d(!0),n($,null,M(le.value,s=>(d(),n("div",{key:s.originalField,class:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-blue-200 dark:border-blue-700"},[e("div",nt,[t[22]||(t[22]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"原始字段",-1)),e("span",dt,p(s.mappedField),1)]),e("div",it,p(s.originalField),1),e("div",ut,p(s.description),1)]))),128))]),t[24]||(t[24]=e("div",{class:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-700"},[e("div",{class:"flex items-start"},[e("span",{class:"material-icons text-yellow-600 dark:text-yellow-400 mr-2 text-sm mt-0.5"},"lightbulb"),e("div",{class:"text-sm text-yellow-800 dark:text-yellow-200"},[e("strong",null,"提示："),m('在规则配置中，您可以使用映射后的字段名（如 peer、item、method 等）来设置匹配条件。 例如：建设银行的"交易地点"字段会映射为"method"，您可以在规则中设置 method 匹配条件。 ')])])],-1))]),e("div",gt,[e("div",pt,[t[26]||(t[26]=e("h4",{class:"text-xl font-bold"},"全局配置",-1)),T.value?(d(),n("div",yt,t[25]||(t[25]=[e("span",{class:"material-icons mr-2 text-green-500"},"check_circle",-1),m(" 配置已自动保存 ")]))):g("",!0)]),e("div",xt,[e("div",mt,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"配置名称",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.name=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"配置名称",onInput:v},null,544),[[y,r.value.name]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"配置描述",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.description=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"配置描述",onInput:v},null,544),[[y,r.value.description]])])])]),e("div",ct,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认扣除账户(一般是资产账户)",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.defaultMinusAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Assets:FIXME",onInput:v},null,544),[[y,r.value.defaultMinusAccount]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认支出账户(一般是支出账户)",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.defaultPlusAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Expenses:FIXME",onInput:v},null,544),[[y,r.value.defaultPlusAccount]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认手续费扣除账户",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.defaultCommissionAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Expenses:Life:crypto:Commission:手续费",onInput:v},null,544),[[y,r.value.defaultCommissionAccount]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认手续费支出账户",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.value.defaultPositionAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Assets:Crypto:ETH",onInput:v},null,544),[[y,r.value.defaultPositionAccount]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认货币",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>r.value.defaultCurrency=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"CNY",onInput:v},null,544),[[y,r.value.defaultCurrency]])]),x.value==="ethereum"?(d(),n("div",bt,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Etherscan API Key",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>K.value=s),onBlur:S,onKeyup:Ue(S,["enter"]),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"请输入Etherscan API Key"},null,544),[[y,K.value]]),t[35]||(t[35]=e("p",{class:"text-xs text-gray-500 mt-1"},[m("用于提升以太坊及EVM链数据获取速率和稳定性，可在 "),e("a",{href:"https://etherscan.io/myapikey",target:"_blank",class:"underline text-blue-600"},"Etherscan官网"),m(" 免费申请。")],-1))])):g("",!0),r.value.defaultCashAccount?(d(),n("div",ft,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认现金账户",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>r.value.defaultCashAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Assets:Cash",onInput:v},null,544),[[y,r.value.defaultCashAccount]])])):g("",!0),r.value.defaultPnlAccount?(d(),n("div",vt,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认损益账户",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>r.value.defaultPnlAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Income:FIXME",onInput:v},null,544),[[y,r.value.defaultPnlAccount]])])):g("",!0),r.value.defaultThirdPartyCustodyAccount?(d(),n("div",kt,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认第三方托管账户",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>r.value.defaultThirdPartyCustodyAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Assets:FIXME",onInput:v},null,544),[[y,r.value.defaultThirdPartyCustodyAccount]])])):g("",!0)])]),e("div",null,[e("div",{class:"flex items-center justify-between mb-4"},[t[41]||(t[41]=e("h4",{class:"text-lg font-semibold"},"规则列表",-1)),e("div",{class:"flex space-x-2"},[e("button",{onClick:ge,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},t[39]||(t[39]=[e("span",{class:"material-icons mr-2"},"add",-1),m(" 添加规则 ")])),e("button",{onClick:ve,class:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600"},t[40]||(t[40]=[e("span",{class:"material-icons mr-2"},"bug_report",-1),m(" 调试规则 ")]))])]),e("div",wt,[e("div",At,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"搜索规则",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>C.value=s),type:"text",placeholder:"搜索规则名称、描述、标签...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},null,512),[[y,C.value]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"筛选类型",-1)),u(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>i.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},t[43]||(t[43]=[e("option",{value:""},"全部类型",-1),e("option",{value:"收入"},"收入",-1),e("option",{value:"支出"},"支出",-1),e("option",{value:"其他"},"其他",-1)]),512),[[R,i.value]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"排序方式",-1)),e("div",Ct,[u(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>o.value=s),class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},t[45]||(t[45]=[e("option",{value:"name"},"按名称",-1),e("option",{value:"created"},"按创建时间",-1)]),512),[[R,o.value]]),e("button",{onClick:we,class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-800",title:l.value==="asc"?"升序":"降序"},[e("span",Ut,p(l.value==="asc"?"arrow_upward":"arrow_downward"),1)],8,ht)])])])]),e("div",Pt,[(d(!0),n($,null,M(H.value,s=>(d(),n("div",{key:s.id,class:"relative bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600"},[e("div",Kt,[e("button",{onClick:f=>pe(s),class:"text-blue-600 hover:text-blue-800 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",title:"编辑规则"},t[47]||(t[47]=[e("span",{class:"material-icons text-lg"},"edit",-1)]),8,Vt),e("button",{onClick:f=>xe(s.id),class:"text-red-600 hover:text-red-800 p-1.5 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"删除规则"},t[48]||(t[48]=[e("span",{class:"material-icons text-lg"},"delete",-1)]),8,$t)]),e("div",Mt,[e("div",Et,[e("h5",Tt,p(s.name),1),s.ignore?(d(),n("span",It,"忽略")):g("",!0)]),s.description?(d(),n("p",Ft,p(s.description),1)):g("",!0),e("div",Rt,[t[57]||(t[57]=e("h6",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"匹配条件",-1)),e("div",jt,[s.peer?(d(),n("div",St,[t[49]||(t[49]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"交易对方:",-1)),e("span",Lt,p(s.peer),1)])):g("",!0),s.item?(d(),n("div",Ht,[t[50]||(t[50]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"商品说明:",-1)),e("span",Bt,p(s.item),1)])):g("",!0),s.type?(d(),n("div",Dt,[t[51]||(t[51]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"交易类型:",-1)),e("span",Nt,p(s.type),1)])):g("",!0),s.method?(d(),n("div",zt,[t[52]||(t[52]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"支付方式:",-1)),e("span",qt,p(s.method),1)])):g("",!0),s.category?(d(),n("div",Xt,[t[53]||(t[53]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"交易分类:",-1)),e("span",Ot,p(s.category),1)])):g("",!0),s.txType?(d(),n("div",Qt,[t[54]||(t[54]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"交易类型:",-1)),e("span",Yt,p(s.txType),1)])):g("",!0),s.time?(d(),n("div",Gt,[t[55]||(t[55]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"时间范围:",-1)),e("span",Jt,p(s.time),1)])):g("",!0),s.minPrice||s.maxPrice?(d(),n("div",Wt,[t[56]||(t[56]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"金额范围:",-1)),e("span",Zt,p(s.minPrice?`${s.minPrice}`:"0")+" - "+p(s.maxPrice?`${s.maxPrice}`:"∞"),1)])):g("",!0)])]),e("div",_t,[t[64]||(t[64]=e("h6",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"账户配置",-1)),e("div",er,[s.targetAccount?(d(),n("div",tr,[t[58]||(t[58]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"目标账户:",-1)),e("span",rr,p(s.targetAccount),1)])):g("",!0),s.methodAccount?(d(),n("div",or,[t[59]||(t[59]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"方法账户:",-1)),e("span",sr,p(s.methodAccount),1)])):g("",!0),s.cashAccount?(d(),n("div",ar,[t[60]||(t[60]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"现金账户:",-1)),e("span",lr,p(s.cashAccount),1)])):g("",!0),s.positionAccount?(d(),n("div",nr,[t[61]||(t[61]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"持仓账户:",-1)),e("span",dr,p(s.positionAccount),1)])):g("",!0),s.commissionAccount?(d(),n("div",ir,[t[62]||(t[62]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"手续费账户:",-1)),e("span",ur,p(s.commissionAccount),1)])):g("",!0),s.pnlAccount?(d(),n("div",gr,[t[63]||(t[63]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"损益账户:",-1)),e("span",pr,p(s.pnlAccount),1)])):g("",!0)])]),s.fullMatch||s.ignore||s.sep?(d(),n("div",yr,[t[68]||(t[68]=e("h6",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"匹配选项",-1)),e("div",xr,[s.fullMatch?(d(),n("span",mr,t[65]||(t[65]=[e("span",{class:"material-icons text-xs mr-1"},"check_circle",-1),m(" 精确匹配 ")]))):g("",!0),s.ignore?(d(),n("span",cr,t[66]||(t[66]=[e("span",{class:"material-icons text-xs mr-1"},"block",-1),m(" 忽略交易 ")]))):g("",!0),s.sep?(d(),n("span",br,[t[67]||(t[67]=e("span",{class:"material-icons text-xs mr-1"},"list",-1)),m(" 分隔符: "+p(s.sep),1)])):g("",!0)])])):g("",!0),s.tags&&s.tags.length>0?(d(),n("div",fr,[t[69]||(t[69]=e("h6",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"标签",-1)),e("div",vr,[(d(!0),n($,null,M(s.tags,f=>(d(),n("span",{key:f,class:"inline-block bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 px-2 py-1 rounded text-xs font-semibold"},p(f),1))),128))])])):g("",!0)])]))),128))]),H.value.length===0?(d(),n("div",kr,[t[70]||(t[70]=e("span",{class:"material-icons text-4xl text-gray-400 dark:text-gray-500 mb-4"},"rule",-1)),e("p",wr,p(C.value||i.value?"没有找到匹配的规则":"还没有配置规则"),1)])):g("",!0)]),t[71]||(t[71]=e("div",{class:"flex justify-end pt-8 border-t border-gray-200 dark:border-gray-700"},null,-1))])):x.value?r.value?g("",!0):(d(),n("div",Cr,[t[74]||(t[74]=e("i",{class:"material-icons text-4xl text-yellow-400 mb-4"},"warning",-1)),t[75]||(t[75]=e("p",{class:"text-gray-600 dark:text-gray-300 mb-4"},"该解析器还没有配置，是否从预设配置创建？",-1)),e("button",{onClick:ue,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},t[73]||(t[73]=[e("span",{class:"material-icons mr-2"},"add",-1),m(" 从预设创建配置 ")]))])):(d(),n("div",Ar,t[72]||(t[72]=[e("i",{class:"material-icons text-4xl text-gray-400 dark:text-gray-500 mb-4"},"storage",-1),e("p",{class:"text-gray-600 dark:text-gray-300"},"请先选择一个解析器来配置规则",-1)])))]),w.value?(d(),n("div",hr,[e("div",Ur,[I(Ye,{rule:A.value,"is-editing":!!A.value,onSave:ye,onClose:D},null,8,["rule","is-editing"])])])):g("",!0),h.value?(d(),n("div",Pr,[e("div",Kr,[e("div",Vr,[t[77]||(t[77]=e("h3",{class:"text-2xl font-bold"},"历史记录",-1)),e("button",{onClick:t[15]||(t[15]=s=>h.value=!1),class:"text-gray-400 hover:text-gray-600 dark:text-gray-500 text-2xl"},t[76]||(t[76]=[e("span",{class:"material-icons"},"close",-1)]))]),e("div",$r,[(d(!0),n($,null,M(L.value,s=>(d(),n("div",{key:s.id,class:"border-2 border-gray-100 dark:border-gray-800 rounded-xl p-4 hover:bg-gray-100 dark:hover:bg-gray-900 cursor-pointer font-semibold",onClick:f=>be(s.id)},[e("div",Er,[e("div",null,[e("h4",Tr,p(s.name),1),e("p",Ir,p(fe(s.createdAt)),1)]),e("div",Fr,[t[79]||(t[79]=e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg text-base hover:bg-blue-700 font-semibold"}," 应用 ",-1)),e("button",{onClick:oe(f=>ke(s.id),["stop"]),class:"px-4 py-2 bg-red-600 text-white rounded-lg text-base hover:bg-red-700 font-semibold",title:"删除历史记录"},t[78]||(t[78]=[e("span",{class:"material-icons text-sm"},"delete",-1)]),8,Rr)])])],8,Mr))),128))]),L.value.length===0?(d(),n("div",jr," 暂无历史记录 ")):g("",!0)])])):g("",!0)])}}});export{Dr as default};
