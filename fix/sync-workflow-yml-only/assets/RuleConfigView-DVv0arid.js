import"./index-DhnbvQSW.js";import{B as ae,p as Ue,g as he,P as Pe,a as Ke}from"./ProviderSelector-Dqg_d2Yi.js";import{d as le,r as v,l as S,a as n,b as e,e as b,t as p,w as f,n as j,m as u,p as y,q as L,s as se,j as c,i,c as $,o as Ve,x as g,u as $e,f as Me,F as I,y as F,z as Ee,A as Te}from"./vendor-axiUcNeZ.js";import{r as A}from"./__vite-browser-external-CweDX_Kw.js";const Ie={class:"bg-white dark:bg-gray-800 border rounded-lg p-6 text-gray-900 dark:text-gray-100"},Fe={class:"flex items-center justify-between mb-4"},Re={class:"text-lg font-semibold"},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={class:"border-t pt-4 border-gray-200 dark:border-gray-700"},Le={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ze={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4"},He={class:"flex items-center"},Be={class:"flex items-center"},De={class:"border-t pt-4 border-gray-200 dark:border-gray-700"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"mt-4"},Xe={class:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Oe={class:"border-t pt-4"},Qe={class:"pt-4 border-t border-gray-200 flex justify-end gap-2 flex-wrap"},Ye=le({__name:"RuleEditor",props:{rule:{},isEditing:{type:Boolean,default:!1}},emits:["save","close"],setup(M,{emit:R}){const V=M,m=R,r=v({name:"",description:"",peer:"",item:"",type:"支出",method:"",category:"",txType:"",time:"",minPrice:void 0,maxPrice:void 0,fullMatch:!1,sep:",",ignore:!1,targetAccount:"",methodAccount:"",cashAccount:"",positionAccount:"",commissionAccount:"",pnlAccount:"",tags:[]}),C=v(""),h=()=>{r.value={name:"",description:"",peer:"",item:"",type:"支出",method:"",category:"",txType:"",time:"",minPrice:void 0,maxPrice:void 0,fullMatch:!1,sep:",",ignore:!1,targetAccount:"",methodAccount:"",cashAccount:"",positionAccount:"",commissionAccount:"",pnlAccount:"",tags:[]},C.value=""};S(()=>V.rule,d=>{var o;d?(r.value={name:d.name,description:d.description||"",peer:d.peer||"",item:d.item||"",type:d.type||"",method:d.method||"",category:d.category||"",txType:d.txType||"",time:d.time||"",minPrice:d.minPrice,maxPrice:d.maxPrice,fullMatch:d.fullMatch||!1,sep:d.sep||"",ignore:d.ignore||!1,targetAccount:d.targetAccount||"",methodAccount:d.methodAccount||"",cashAccount:d.cashAccount||"",positionAccount:d.positionAccount||"",commissionAccount:d.commissionAccount||"",pnlAccount:d.pnlAccount||"",tags:d.tags||[]},C.value=((o=d.tags)==null?void 0:o.join(", "))||""):h()},{immediate:!0});const K=()=>{r.value.tags=C.value.split(",").map(d=>d.trim()).filter(d=>d.length>0)},P=()=>{var o;const d={id:((o=V.rule)==null?void 0:o.id)||Date.now().toString(),name:r.value.name,description:r.value.description||"",peer:r.value.peer||"",item:r.value.item||"",type:r.value.type||"",method:r.value.method||"",category:r.value.category||"",txType:r.value.txType||"",time:r.value.time||"",minPrice:r.value.minPrice,maxPrice:r.value.maxPrice,fullMatch:r.value.fullMatch,sep:r.value.sep||"",ignore:r.value.ignore,targetAccount:r.value.targetAccount||"",methodAccount:r.value.methodAccount||"",cashAccount:r.value.cashAccount||"",positionAccount:r.value.positionAccount||"",commissionAccount:r.value.commissionAccount||"",pnlAccount:r.value.pnlAccount||"",tags:r.value.tags,priority:1};m("save",d),h()};return(d,o)=>{const U=ae;return i(),n("div",Ie,[e("div",Fe,[e("h3",Re,p(M.isEditing?"编辑规则":"新增规则"),1),b(U,{size:"small",plain:"",onClick:o[0]||(o[0]=l=>d.$emit("close"))},{default:f(()=>[...o[23]||(o[23]=[c("关闭",-1)])]),_:1})]),e("form",{onSubmit:j(P,["prevent"]),class:"space-y-4"},[e("div",Se,[e("div",null,[o[24]||(o[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"规则名称",-1)),u(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>r.value.name=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"输入规则名称",required:""},null,512),[[y,r.value.name]])]),e("div",null,[o[25]||(o[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"描述",-1)),u(e("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>r.value.description=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"规则描述（可选）"},null,512),[[y,r.value.description]])])]),e("div",je,[o[39]||(o[39]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-200 mb-3"},"匹配条件",-1)),e("div",Le,[e("div",null,[o[26]||(o[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"交易对方 (peer)",-1)),u(e("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>r.value.peer=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"交易对方名称"},null,512),[[y,r.value.peer]])]),e("div",null,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"商品说明 (item)",-1)),u(e("input",{"onUpdate:modelValue":o[4]||(o[4]=l=>r.value.item=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"商品或交易说明"},null,512),[[y,r.value.item]])]),e("div",null,[o[29]||(o[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"交易类型 (type)",-1)),u(e("select",{"onUpdate:modelValue":o[5]||(o[5]=l=>r.value.type=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},[...o[28]||(o[28]=[e("option",{value:""},"选择类型",-1),e("option",{value:"收入"},"收入",-1),e("option",{value:"支出"},"支出",-1),e("option",{value:"其他"},"其他",-1)])],512),[[L,r.value.type]])]),e("div",null,[o[30]||(o[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"支付方式 (method)",-1)),u(e("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>r.value.method=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"支付方式"},null,512),[[y,r.value.method]])]),e("div",null,[o[31]||(o[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"交易分类 (category)",-1)),u(e("input",{"onUpdate:modelValue":o[7]||(o[7]=l=>r.value.category=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"交易分类"},null,512),[[y,r.value.category]])]),e("div",null,[o[32]||(o[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"交易类型 (txType)",-1)),u(e("input",{"onUpdate:modelValue":o[8]||(o[8]=l=>r.value.txType=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"交易类型"},null,512),[[y,r.value.txType]])]),e("div",null,[o[33]||(o[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"时间范围 (time)",-1)),u(e("input",{"onUpdate:modelValue":o[9]||(o[9]=l=>r.value.time=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"11:00-14:00"},null,512),[[y,r.value.time]])]),e("div",null,[o[34]||(o[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"最小金额",-1)),u(e("input",{"onUpdate:modelValue":o[10]||(o[10]=l=>r.value.minPrice=l),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"最小金额"},null,512),[[y,r.value.minPrice,void 0,{number:!0}]])]),e("div",null,[o[35]||(o[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"最大金额",-1)),u(e("input",{"onUpdate:modelValue":o[11]||(o[11]=l=>r.value.maxPrice=l),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"最大金额"},null,512),[[y,r.value.maxPrice,void 0,{number:!0}]])])]),e("div",ze,[e("div",He,[u(e("input",{"onUpdate:modelValue":o[12]||(o[12]=l=>r.value.fullMatch=l),type:"checkbox",id:"fullMatch",class:"mr-2"},null,512),[[se,r.value.fullMatch]]),o[36]||(o[36]=e("label",{for:"fullMatch",class:"text-sm text-gray-700 dark:text-gray-200"},"精确匹配",-1))]),e("div",Be,[u(e("input",{"onUpdate:modelValue":o[13]||(o[13]=l=>r.value.ignore=l),type:"checkbox",id:"ignore",class:"mr-2"},null,512),[[se,r.value.ignore]]),o[37]||(o[37]=e("label",{for:"ignore",class:"text-sm text-gray-700 dark:text-gray-200"},"忽略此交易",-1))]),e("div",null,[o[38]||(o[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"分隔符 (sep)",-1)),u(e("input",{"onUpdate:modelValue":o[14]||(o[14]=l=>r.value.sep=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:","},null,512),[[y,r.value.sep]])])])]),e("div",De,[o[49]||(o[49]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-200 mb-3"},"账户配置",-1)),e("div",Ne,[e("div",null,[o[40]||(o[40]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"目标账户 (targetAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[15]||(o[15]=l=>r.value.targetAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Expenses:Food"},null,512),[[y,r.value.targetAccount]]),o[41]||(o[41]=e("p",{class:"text-xs text-gray-500 mt-1"},"支出账户，如：Expenses:Food、Expenses:Life:Food:Snack:零食等",-1))]),e("div",null,[o[42]||(o[42]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"支付账户 (methodAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[16]||(o[16]=l=>r.value.methodAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Assets:Alipay"},null,512),[[y,r.value.methodAccount]]),o[43]||(o[43]=e("p",{class:"text-xs text-gray-500 mt-1"},"支付方式账户，如：Assets:Alipay、Liabilities:Life:Huabei:花呗等",-1))])]),e("details",qe,[o[48]||(o[48]=e("summary",{class:"cursor-pointer text-sm font-medium text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-100 flex items-center"},[e("span",{class:"material-icons text-sm mr-1 transition-transform"},"expand_more"),c(" 高级账户设置 ")],-1)),e("div",Xe,[e("div",null,[o[44]||(o[44]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"现金账户 (cashAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[17]||(o[17]=l=>r.value.cashAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Assets:Cash"},null,512),[[y,r.value.cashAccount]])]),e("div",null,[o[45]||(o[45]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"持仓账户 (positionAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[18]||(o[18]=l=>r.value.positionAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Assets:Positions"},null,512),[[y,r.value.positionAccount]])]),e("div",null,[o[46]||(o[46]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"手续费账户 (commissionAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[19]||(o[19]=l=>r.value.commissionAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Expenses:Commission"},null,512),[[y,r.value.commissionAccount]])]),e("div",null,[o[47]||(o[47]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"损益账户 (pnlAccount)",-1)),u(e("input",{"onUpdate:modelValue":o[20]||(o[20]=l=>r.value.pnlAccount=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"Income:PnL"},null,512),[[y,r.value.pnlAccount]])])])])]),e("div",Oe,[o[52]||(o[52]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-200 mb-3"},"标签",-1)),e("div",null,[o[50]||(o[50]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"标签 (tags)",-1)),u(e("input",{"onUpdate:modelValue":o[21]||(o[21]=l=>C.value=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",placeholder:"标签1,标签2,标签3",onInput:K},null,544),[[y,C.value]]),o[51]||(o[51]=e("p",{class:"text-xs text-gray-500 mt-1"},"使用逗号分隔多个标签",-1))])]),e("div",Qe,[b(U,{onClick:o[22]||(o[22]=l=>d.$emit("close"))},{default:f(()=>[...o[53]||(o[53]=[c("取消",-1)])]),_:1}),b(U,{type:"primary","native-type":"submit"},{default:f(()=>[c(p(M.isEditing?"更新":"创建"),1)]),_:1})])],32)])}}}),Ge={class:"w-full px-4 sm:px-6 lg:px-8 py-8"},Je={class:"bg-white shadow-2xl rounded-2xl border border-gray-200 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 p-10"},We={class:"flex items-center justify-between mb-8"},Ze={class:"mb-8"},_e={key:0,class:"space-y-6"},et={class:"flex items-center justify-between"},tt={class:"text-xl font-semibold"},rt={class:"text-gray-600 dark:text-gray-300"},ot={class:"flex flex-wrap gap-2"},st={class:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-200 dark:border-blue-700 p-6"},at={class:"text-blue-700 dark:text-blue-300 mb-4"},lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},nt={class:"flex items-center justify-between mb-2"},it={class:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded"},dt={class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-1"},ut={class:"text-xs text-gray-600 dark:text-gray-400"},gt={class:"bg-gray-50 dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-700 p-8"},pt={class:"flex items-center justify-between mb-6"},yt={key:0,class:"text-sm text-gray-600 dark:text-gray-300 transition-opacity duration-300"},mt={class:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},bt={key:0},ft={key:1},vt={key:2},kt={key:3},wt={class:"flex items-center justify-between mb-4"},At={class:"flex flex-wrap gap-2"},Ct={class:"mb-6 bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700"},Ut={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ht={class:"flex space-x-2"},Pt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Kt={class:"absolute top-3 right-3 flex gap-1 z-10"},Vt={class:"pr-16"},$t={class:"flex items-center space-x-2 mb-3"},Mt={class:"font-semibold text-gray-900 dark:text-gray-100 text-lg"},Et={key:0,class:"text-xs bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 px-2 py-1 rounded-full font-semibold"},Tt={key:0,class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},It={class:"mb-4"},Ft={class:"space-y-1.5"},Rt={key:0,class:"flex items-center text-sm"},St={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},jt={key:1,class:"flex items-center text-sm"},Lt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},zt={key:2,class:"flex items-center text-sm"},Ht={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium"},Bt={key:3,class:"flex items-center text-sm"},Dt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},Nt={key:4,class:"flex items-center text-sm"},qt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},Xt={key:5,class:"flex items-center text-sm"},Ot={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium truncate"},Qt={key:6,class:"flex items-center text-sm"},Yt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium"},Gt={key:7,class:"flex items-center text-sm"},Jt={class:"flex-1 text-gray-700 dark:text-gray-300 font-medium"},Wt={class:"mb-4"},Zt={class:"space-y-1.5"},_t={key:0,class:"flex items-center text-sm"},er={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},tr={key:1,class:"flex items-center text-sm"},rr={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},or={key:2,class:"flex items-center text-sm"},sr={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},ar={key:3,class:"flex items-center text-sm"},lr={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},nr={key:4,class:"flex items-center text-sm"},ir={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},dr={key:5,class:"flex items-center text-sm"},ur={class:"flex-1 text-gray-700 dark:text-gray-300 font-mono text-xs truncate"},gr={key:1,class:"mb-4"},pr={class:"flex flex-wrap gap-2"},yr={key:0,class:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded text-xs font-semibold"},mr={key:1,class:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 rounded text-xs font-semibold"},xr={key:2,class:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 rounded text-xs font-semibold"},cr={key:2},br={class:"flex flex-wrap gap-1"},fr={key:0,class:"text-center py-8"},vr={class:"text-gray-600 dark:text-gray-300"},kr={key:1,class:"text-center py-12"},wr={key:2,class:"text-center py-12"},Ar={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Cr={class:"max-w-4xl w-full mx-4 max-h-screen overflow-y-auto"},Ur={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},hr={class:"bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto border border-gray-200 dark:bg-gray-800 dark:border-gray-700"},Pr={class:"flex items-center justify-between mb-6"},Kr={class:"space-y-2"},Vr=["onClick"],$r={class:"flex items-center justify-between"},Mr={class:"font-medium"},Er={class:"text-sm text-gray-600 dark:text-gray-300"},Tr={class:"flex gap-2"},Ir={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},Lr=le({__name:"RuleConfigView",setup(M){const R=Te(),V=Me(),m=v(null),r=v(null),C=v(!1),h=v(void 0),K=v(!1),P=v(""),d=v(""),o=v("");v(!1);const U=v("asc"),l=v(!1),ne=v({ethereum:{apiKey:"",rpcUrl:""},bsc:{apiKey:"",rpcUrl:""},polygon:{apiKey:"",rpcUrl:""},arbitrum:{apiKey:"",rpcUrl:""},optimism:{apiKey:"",rpcUrl:""},avalanche:{apiKey:"",rpcUrl:""},solana:{apiKey:"",rpcUrl:""},bitcoin:{apiKey:"",rpcUrl:""},ethscan:{apiKey:""},tronscan:{apiKey:""}}),E=v("");S([r,m],()=>{m.value==="ethereum"&&r.value&&r.value.apiConfig&&r.value.apiConfig.ethereum&&(E.value=r.value.apiConfig.ethereum.apiKey||"")},{immediate:!0});function z(){m.value==="ethereum"&&r.value&&r.value.apiConfig&&r.value.apiConfig.ethereum&&(r.value.apiConfig.ethereum.apiKey=E.value,w())}const ie=$(()=>Ue),de=$(()=>m.value?he(m.value):[]),ue=$(()=>r.value?[...r.value.rules]:[]),H=$(()=>m.value?A.getHistory(m.value):[]),B=$(()=>{let a=ue.value.filter(t=>{var k;const x=t.name.toLowerCase().includes(P.value.toLowerCase())||((k=t.description)==null?void 0:k.toLowerCase().includes(P.value.toLowerCase()))||t.tags&&t.tags.some(T=>T.toLowerCase().includes(P.value.toLowerCase())),s=d.value===""||t.type===d.value;return x&&s});return o.value==="name"?a=a.sort((t,x)=>{const s=t.name.localeCompare(x.name);return U.value==="asc"?s:-s}):o.value==="created"&&(a=a.sort((t,x)=>{const s=(t.id||"").localeCompare(x.id||"");return U.value==="asc"?s:-s})),a}),ge=a=>{m.value=a},D=()=>{var t,x,s,k,T,X,O,Q,Y,G,J,W,Z,_,ee,te,re,oe;if(!m.value)return;const a=A.getConfig(m.value);a&&(a.apiConfig||(a.apiConfig={ethereum:{apiKey:""}}),a.apiConfig.ethereum||(a.apiConfig.ethereum={apiKey:""})),r.value=a,a!=null&&a.apiConfig&&(ne.value={ethereum:{apiKey:((t=a.apiConfig.ethereum)==null?void 0:t.apiKey)||"",rpcUrl:((x=a.apiConfig.ethereum)==null?void 0:x.rpcUrl)||""},bsc:{apiKey:((s=a.apiConfig.bsc)==null?void 0:s.apiKey)||"",rpcUrl:((k=a.apiConfig.bsc)==null?void 0:k.rpcUrl)||""},polygon:{apiKey:((T=a.apiConfig.polygon)==null?void 0:T.apiKey)||"",rpcUrl:((X=a.apiConfig.polygon)==null?void 0:X.rpcUrl)||""},arbitrum:{apiKey:((O=a.apiConfig.arbitrum)==null?void 0:O.apiKey)||"",rpcUrl:((Q=a.apiConfig.arbitrum)==null?void 0:Q.rpcUrl)||""},optimism:{apiKey:((Y=a.apiConfig.optimism)==null?void 0:Y.apiKey)||"",rpcUrl:((G=a.apiConfig.optimism)==null?void 0:G.rpcUrl)||""},avalanche:{apiKey:((J=a.apiConfig.avalanche)==null?void 0:J.apiKey)||"",rpcUrl:((W=a.apiConfig.avalanche)==null?void 0:W.rpcUrl)||""},solana:{apiKey:((Z=a.apiConfig.solana)==null?void 0:Z.apiKey)||"",rpcUrl:((_=a.apiConfig.solana)==null?void 0:_.rpcUrl)||""},bitcoin:{apiKey:((ee=a.apiConfig.bitcoin)==null?void 0:ee.apiKey)||"",rpcUrl:((te=a.apiConfig.bitcoin)==null?void 0:te.rpcUrl)||""},ethscan:{apiKey:((re=a.apiConfig.ethscan)==null?void 0:re.apiKey)||""},tronscan:{apiKey:((oe=a.apiConfig.tronscan)==null?void 0:oe.apiKey)||""}})},pe=()=>{const a=R.query.provider;a&&Object.values(Ke).includes(a)&&(m.value=a,D())},ye=async()=>{if(m.value)try{const a=await A.createFromPreset(m.value,"我的配置");r.value=a,A.saveConfig(a)}catch(a){console.error("Failed to create from preset:",a),alert("创建配置失败")}},me=()=>{h.value=void 0,C.value=!0},xe=a=>{h.value=a,C.value=!0},ce=a=>{if(!r.value)return;a.id||(a.id=Date.now().toString());const t=r.value.rules.findIndex(x=>x.id===a.id);t>=0?r.value.rules[t]=a:r.value.rules.push(a),A.saveConfig(r.value),alert("规则保存成功！"),N()},be=a=>{!r.value||!a||confirm("确定要删除这个规则吗？")&&(r.value.rules=r.value.rules.filter(t=>t.id!==a),A.saveConfig(r.value))},N=()=>{C.value=!1,h.value=void 0},fe=async()=>{if(!m.value)return;const a=await A.exportToClipboard(m.value);alert(a?"配置已复制到剪贴板！":"导出失败，请重试")},ve=async()=>{const a=await A.importFromClipboard();a?(r.value=a,alert("配置导入成功！")):alert("导入失败，请检查剪贴板内容格式")},q=a=>{const t=A.applyHistory(a);t?(r.value=t,K.value=!1,alert("历史配置应用成功！")):alert("应用历史配置失败")},ke=a=>new Date(a).toLocaleString("zh-CN"),we=()=>{m.value?V.push({path:"/bill-processing",query:{provider:m.value,from:"rule-config"}}):V.push({path:"/bill-processing",query:{from:"rule-config"}})},Ae=a=>{confirm("确定要删除这个历史记录吗？")&&(A.deleteHistory(a)?(K.value=!1,alert("历史记录删除成功！")):alert("删除失败，请重试"))},w=()=>{r.value&&(r.value.apiConfig||(r.value.apiConfig={ethereum:{apiKey:""}}),r.value.apiConfig.ethereum||(r.value.apiConfig.ethereum={apiKey:""}),r.value={...r.value},A.saveConfig(r.value),l.value=!0,setTimeout(()=>{l.value=!1},2e3))},Ce=()=>{U.value=U.value==="asc"?"desc":"asc"};return S(m,()=>{D()}),Ve(()=>{pe()}),(a,t)=>{const x=ae;return i(),n("div",Ge,[e("div",Je,[e("div",We,[t[18]||(t[18]=e("h1",{class:"text-3xl font-extrabold"},"规则配置",-1)),b(x,{onClick:t[0]||(t[0]=s=>$e(V).push("/"))},{default:f(()=>[...t[17]||(t[17]=[c("返回首页",-1)])]),_:1})]),e("div",Ze,[t[19]||(t[19]=e("h2",{class:"text-lg font-semibold mb-4"},"选择解析器",-1)),b(Pe,{"supported-providers":ie.value,"selected-provider":m.value,onProviderSelected:ge},null,8,["supported-providers","selected-provider"])]),m.value&&r.value?(i(),n("div",_e,[e("div",et,[e("div",null,[e("h3",tt,p(r.value.name),1),e("p",rt,p(r.value.description),1)]),e("div",ot,[b(x,{onClick:t[1]||(t[1]=s=>K.value=!0)},{default:f(()=>[...t[20]||(t[20]=[c("历史记录",-1)])]),_:1}),b(x,{type:"primary",onClick:fe},{default:f(()=>[...t[21]||(t[21]=[c("导出配置",-1)])]),_:1}),b(x,{plain:"",type:"primary",onClick:ve},{default:f(()=>[...t[22]||(t[22]=[c("导入配置",-1)])]),_:1})])]),e("div",st,[t[24]||(t[24]=e("div",{class:"flex items-center mb-4"},[e("span",{class:"material-icons text-blue-600 dark:text-blue-400 mr-2"},"info"),e("h4",{class:"text-lg font-semibold text-blue-800 dark:text-blue-200"},"字段映射说明")],-1)),e("p",at," 以下是 "+p(m.value)+" 解析器的字段映射关系，帮助您了解原始表格字段如何映射到规则匹配字段： ",1),e("div",lt,[(i(!0),n(I,null,F(de.value,s=>(i(),n("div",{key:s.originalField,class:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-blue-200 dark:border-blue-700"},[e("div",nt,[t[23]||(t[23]=e("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"原始字段",-1)),e("span",it,p(s.mappedField),1)]),e("div",dt,p(s.originalField),1),e("div",ut,p(s.description),1)]))),128))]),t[25]||(t[25]=e("div",{class:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-700"},[e("div",{class:"flex items-start"},[e("span",{class:"material-icons text-yellow-600 dark:text-yellow-400 mr-2 text-sm mt-0.5"},"lightbulb"),e("div",{class:"text-sm text-yellow-800 dark:text-yellow-200"},[e("strong",null,"提示："),c('在规则配置中，您可以使用映射后的字段名（如 peer、item、method 等）来设置匹配条件。 例如：建设银行的"交易地点"字段会映射为"method"，您可以在规则中设置 method 匹配条件。 ')])])],-1))]),e("div",gt,[e("div",pt,[t[27]||(t[27]=e("h4",{class:"text-xl font-bold"},"全局配置",-1)),l.value?(i(),n("div",yt,[...t[26]||(t[26]=[e("span",{class:"material-icons mr-2 text-green-500"},"check_circle",-1),c(" 配置已自动保存 ",-1)])])):g("",!0)]),e("div",mt,[e("div",xt,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"配置名称",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.name=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"配置名称",onInput:w},null,544),[[y,r.value.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"配置描述",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.description=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"配置描述",onInput:w},null,544),[[y,r.value.description]])])])]),e("div",ct,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认扣除账户(一般是资产账户)",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.defaultMinusAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Assets:FIXME",onInput:w},null,544),[[y,r.value.defaultMinusAccount]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认支出账户(一般是支出账户)",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.defaultPlusAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Expenses:FIXME",onInput:w},null,544),[[y,r.value.defaultPlusAccount]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认手续费扣除账户",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.value.defaultCommissionAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Expenses:Life:crypto:Commission:手续费",onInput:w},null,544),[[y,r.value.defaultCommissionAccount]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认手续费支出账户",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>r.value.defaultPositionAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Assets:Crypto:ETH",onInput:w},null,544),[[y,r.value.defaultPositionAccount]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认货币",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>r.value.defaultCurrency=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"CNY",onInput:w},null,544),[[y,r.value.defaultCurrency]])]),m.value==="ethereum"?(i(),n("div",bt,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"Etherscan API Key",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>E.value=s),onBlur:z,onKeyup:Ee(z,["enter"]),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"请输入Etherscan API Key"},null,544),[[y,E.value]]),t[36]||(t[36]=e("p",{class:"text-xs text-gray-500 mt-1"},[c("用于提升以太坊及EVM链数据获取速率和稳定性，可在 "),e("a",{href:"https://etherscan.io/myapikey",target:"_blank",class:"underline text-blue-600"},"Etherscan官网"),c(" 免费申请。")],-1))])):g("",!0),r.value.defaultCashAccount?(i(),n("div",ft,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认现金账户",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>r.value.defaultCashAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Assets:Cash",onInput:w},null,544),[[y,r.value.defaultCashAccount]])])):g("",!0),r.value.defaultPnlAccount?(i(),n("div",vt,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认损益账户",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>r.value.defaultPnlAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Income:FIXME",onInput:w},null,544),[[y,r.value.defaultPnlAccount]])])):g("",!0),r.value.defaultThirdPartyCustodyAccount?(i(),n("div",kt,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"默认第三方托管账户",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>r.value.defaultThirdPartyCustodyAccount=s),type:"text",class:"w-full px-4 py-3 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-semibold",placeholder:"Assets:FIXME",onInput:w},null,544),[[y,r.value.defaultThirdPartyCustodyAccount]])])):g("",!0)])]),e("div",null,[e("div",wt,[t[42]||(t[42]=e("h4",{class:"text-lg font-semibold"},"规则列表",-1)),e("div",At,[b(x,{type:"primary",onClick:me},{default:f(()=>[...t[40]||(t[40]=[c("添加规则",-1)])]),_:1}),b(x,{onClick:we},{default:f(()=>[...t[41]||(t[41]=[c("调试规则",-1)])]),_:1})])]),e("div",Ct,[e("div",Ut,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"搜索规则",-1)),u(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>P.value=s),type:"text",placeholder:"搜索规则名称、描述、标签...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},null,512),[[y,P.value]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"筛选类型",-1)),u(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>d.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},[...t[44]||(t[44]=[e("option",{value:""},"全部类型",-1),e("option",{value:"收入"},"收入",-1),e("option",{value:"支出"},"支出",-1),e("option",{value:"其他"},"其他",-1)])],512),[[L,d.value]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"},"排序方式",-1)),e("div",ht,[u(e("select",{"onUpdate:modelValue":t[15]||(t[15]=s=>o.value=s),class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"},[...t[46]||(t[46]=[e("option",{value:"name"},"按名称",-1),e("option",{value:"created"},"按创建时间",-1)])],512),[[L,o.value]]),b(x,{size:"small",plain:"",round:"",title:U.value==="asc"?"升序":"降序",onClick:Ce},{default:f(()=>[c(p(U.value==="asc"?"↑":"↓"),1)]),_:1},8,["title"])])])])]),e("div",Pt,[(i(!0),n(I,null,F(B.value,s=>(i(),n("div",{key:s.id,class:"relative bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600"},[e("div",Kt,[b(x,{size:"small",plain:"",title:"编辑规则",onClick:k=>xe(s)},{default:f(()=>[...t[48]||(t[48]=[c("编辑",-1)])]),_:1},8,["onClick"]),b(x,{size:"small",type:"danger",plain:"",title:"删除规则",onClick:k=>be(s.id)},{default:f(()=>[...t[49]||(t[49]=[c("删",-1)])]),_:1},8,["onClick"])]),e("div",Vt,[e("div",$t,[e("h5",Mt,p(s.name),1),s.ignore?(i(),n("span",Et,"忽略")):g("",!0)]),s.description?(i(),n("p",Tt,p(s.description),1)):g("",!0),e("div",It,[t[58]||(t[58]=e("h6",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"匹配条件",-1)),e("div",Ft,[s.peer?(i(),n("div",Rt,[t[50]||(t[50]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"交易对方:",-1)),e("span",St,p(s.peer),1)])):g("",!0),s.item?(i(),n("div",jt,[t[51]||(t[51]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"商品说明:",-1)),e("span",Lt,p(s.item),1)])):g("",!0),s.type?(i(),n("div",zt,[t[52]||(t[52]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"交易类型:",-1)),e("span",Ht,p(s.type),1)])):g("",!0),s.method?(i(),n("div",Bt,[t[53]||(t[53]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"支付方式:",-1)),e("span",Dt,p(s.method),1)])):g("",!0),s.category?(i(),n("div",Nt,[t[54]||(t[54]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"交易分类:",-1)),e("span",qt,p(s.category),1)])):g("",!0),s.txType?(i(),n("div",Xt,[t[55]||(t[55]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"交易类型:",-1)),e("span",Ot,p(s.txType),1)])):g("",!0),s.time?(i(),n("div",Qt,[t[56]||(t[56]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"时间范围:",-1)),e("span",Yt,p(s.time),1)])):g("",!0),s.minPrice||s.maxPrice?(i(),n("div",Gt,[t[57]||(t[57]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"金额范围:",-1)),e("span",Jt,p(s.minPrice?`${s.minPrice}`:"0")+" - "+p(s.maxPrice?`${s.maxPrice}`:"∞"),1)])):g("",!0)])]),e("div",Wt,[t[65]||(t[65]=e("h6",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"账户配置",-1)),e("div",Zt,[s.targetAccount?(i(),n("div",_t,[t[59]||(t[59]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"目标账户:",-1)),e("span",er,p(s.targetAccount),1)])):g("",!0),s.methodAccount?(i(),n("div",tr,[t[60]||(t[60]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"方法账户:",-1)),e("span",rr,p(s.methodAccount),1)])):g("",!0),s.cashAccount?(i(),n("div",or,[t[61]||(t[61]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"现金账户:",-1)),e("span",sr,p(s.cashAccount),1)])):g("",!0),s.positionAccount?(i(),n("div",ar,[t[62]||(t[62]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"持仓账户:",-1)),e("span",lr,p(s.positionAccount),1)])):g("",!0),s.commissionAccount?(i(),n("div",nr,[t[63]||(t[63]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"手续费账户:",-1)),e("span",ir,p(s.commissionAccount),1)])):g("",!0),s.pnlAccount?(i(),n("div",dr,[t[64]||(t[64]=e("span",{class:"text-gray-500 dark:text-gray-400 w-16 text-xs"},"损益账户:",-1)),e("span",ur,p(s.pnlAccount),1)])):g("",!0)])]),s.fullMatch||s.ignore||s.sep?(i(),n("div",gr,[t[69]||(t[69]=e("h6",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"匹配选项",-1)),e("div",pr,[s.fullMatch?(i(),n("span",yr,[...t[66]||(t[66]=[e("span",{class:"material-icons text-xs mr-1"},"check_circle",-1),c(" 精确匹配 ",-1)])])):g("",!0),s.ignore?(i(),n("span",mr,[...t[67]||(t[67]=[e("span",{class:"material-icons text-xs mr-1"},"block",-1),c(" 忽略交易 ",-1)])])):g("",!0),s.sep?(i(),n("span",xr,[t[68]||(t[68]=e("span",{class:"material-icons text-xs mr-1"},"list",-1)),c(" 分隔符: "+p(s.sep),1)])):g("",!0)])])):g("",!0),s.tags&&s.tags.length>0?(i(),n("div",cr,[t[70]||(t[70]=e("h6",{class:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2"},"标签",-1)),e("div",br,[(i(!0),n(I,null,F(s.tags,k=>(i(),n("span",{key:k,class:"inline-block bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 px-2 py-1 rounded text-xs font-semibold"},p(k),1))),128))])])):g("",!0)])]))),128))]),B.value.length===0?(i(),n("div",fr,[t[71]||(t[71]=e("span",{class:"material-icons text-4xl text-gray-400 dark:text-gray-500 mb-4"},"rule",-1)),e("p",vr,p(P.value||d.value?"没有找到匹配的规则":"还没有配置规则"),1)])):g("",!0)]),t[72]||(t[72]=e("div",{class:"flex justify-end pt-8 border-t border-gray-200 dark:border-gray-700"},null,-1))])):m.value?r.value?g("",!0):(i(),n("div",wr,[t[75]||(t[75]=e("i",{class:"material-icons text-4xl text-yellow-400 mb-4"},"warning",-1)),t[76]||(t[76]=e("p",{class:"text-gray-600 dark:text-gray-300 mb-4"},"该解析器还没有配置，是否从预设配置创建？",-1)),b(x,{type:"primary",onClick:ye},{default:f(()=>[...t[74]||(t[74]=[c("从预设创建配置",-1)])]),_:1})])):(i(),n("div",kr,[...t[73]||(t[73]=[e("i",{class:"material-icons text-4xl text-gray-400 dark:text-gray-500 mb-4"},"storage",-1),e("p",{class:"text-gray-600 dark:text-gray-300"},"请先选择一个解析器来配置规则",-1)])]))]),C.value?(i(),n("div",Ar,[e("div",Cr,[b(Ye,{rule:h.value,"is-editing":!!h.value,onSave:ce,onClose:N},null,8,["rule","is-editing"])])])):g("",!0),K.value?(i(),n("div",Ur,[e("div",hr,[e("div",Pr,[t[78]||(t[78]=e("h3",{class:"text-2xl font-bold"},"历史记录",-1)),b(x,{size:"small",plain:"",onClick:t[16]||(t[16]=s=>K.value=!1)},{default:f(()=>[...t[77]||(t[77]=[c("关闭",-1)])]),_:1})]),e("div",Kr,[(i(!0),n(I,null,F(H.value,s=>(i(),n("div",{key:s.id,class:"border-2 border-gray-100 dark:border-gray-800 rounded-xl p-4 hover:bg-gray-100 dark:hover:bg-gray-900 cursor-pointer",onClick:k=>q(s.id)},[e("div",$r,[e("div",null,[e("h4",Mr,p(s.name),1),e("p",Er,p(ke(s.createdAt)),1)]),e("div",Tr,[b(x,{size:"small",type:"primary",onClick:j(k=>q(s.id),["stop"])},{default:f(()=>[...t[79]||(t[79]=[c("应用",-1)])]),_:1},8,["onClick"]),b(x,{size:"small",type:"danger",plain:"",onClick:j(k=>Ae(s.id),["stop"])},{default:f(()=>[...t[80]||(t[80]=[c("删除",-1)])]),_:1},8,["onClick"])])])],8,Vr))),128))]),H.value.length===0?(i(),n("div",Ir," 暂无历史记录 ")):g("",!0)])])):g("",!0)])}}});export{Lr as default};
