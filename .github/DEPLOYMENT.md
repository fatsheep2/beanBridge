# ğŸš€ éƒ¨ç½²è¯´æ˜

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Pages çš„å¤šåˆ†æ”¯éƒ¨ç½²ç­–ç•¥ï¼Œæ”¯æŒä¸»åˆ†æ”¯ç¨³å®šéƒ¨ç½²å’ŒåŠŸèƒ½åˆ†æ”¯é¢„è§ˆéƒ¨ç½²ã€‚

## ğŸ“‚ éƒ¨ç½²ç»“æ„

```
gh-pages åˆ†æ”¯
â”œâ”€â”€ index.html              # main åˆ†æ”¯éƒ¨ç½²ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
â”œâ”€â”€ assets/                 # main åˆ†æ”¯èµ„æº
â”œâ”€â”€ feat/                   # åŠŸèƒ½åˆ†æ”¯é¢„è§ˆç›®å½•
â”‚   â”œâ”€â”€ wasm-support/       # feat/wasm-support åˆ†æ”¯é¢„è§ˆ
â”‚   â””â”€â”€ new-feature/        # feat/new-feature åˆ†æ”¯é¢„è§ˆ
â”œâ”€â”€ fix/                    # ä¿®å¤åˆ†æ”¯é¢„è§ˆç›®å½•
â””â”€â”€ dev/                    # å¼€å‘åˆ†æ”¯é¢„è§ˆç›®å½•
```

## ğŸ”— è®¿é—®åœ°å€

### ç”Ÿäº§ç¯å¢ƒï¼ˆmain åˆ†æ”¯ï¼‰
- åœ°å€ï¼š`https://ä½ çš„ç”¨æˆ·å.github.io/beanBridge/`
- è‡ªåŠ¨éƒ¨ç½²ï¼šæ¨é€åˆ° `main` åˆ†æ”¯æ—¶è‡ªåŠ¨éƒ¨ç½²

### åŠŸèƒ½åˆ†æ”¯é¢„è§ˆ
- æ ¼å¼ï¼š`https://ä½ çš„ç”¨æˆ·å.github.io/beanBridge/åˆ†æ”¯å/`
- ç¤ºä¾‹ï¼š
  - `feat/wasm-support` â†’ `https://ä½ çš„ç”¨æˆ·å.github.io/beanBridge/feat/wasm-support/`
  - `fix/bug-123` â†’ `https://ä½ çš„ç”¨æˆ·å.github.io/beanBridge/fix/bug-123/`

## ğŸ“‹ å·¥ä½œæµè¯´æ˜

### 1. ä¸»åˆ†æ”¯éƒ¨ç½² (deploy-gh-pages.yml)

**è§¦å‘æ¡ä»¶**ï¼š
- æ¨é€åˆ° `main` åˆ†æ”¯
- æ‰‹åŠ¨è§¦å‘

**åŠŸèƒ½**ï¼š
- æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- éƒ¨ç½²åˆ° `gh-pages` åˆ†æ”¯æ ¹ç›®å½•
- ä¸å½±å“å…¶ä»–åˆ†æ”¯çš„é¢„è§ˆéƒ¨ç½²

### 2. åˆ†æ”¯é¢„è§ˆéƒ¨ç½² (deploy-branch-preview.yml)

**è§¦å‘æ¡ä»¶**ï¼š
- æ¨é€åˆ°ä»¥ä¸‹åˆ†æ”¯ï¼š
  - `feat/**` - åŠŸèƒ½åˆ†æ”¯
  - `fix/**` - ä¿®å¤åˆ†æ”¯
  - `dev/**` - å¼€å‘åˆ†æ”¯
- æ‰‹åŠ¨è§¦å‘ï¼ˆå¯æŒ‡å®šåˆ†æ”¯åï¼‰

**åŠŸèƒ½**ï¼š
- æ„å»ºåˆ†æ”¯ç‰ˆæœ¬ï¼ˆä½¿ç”¨æ­£ç¡®çš„ base pathï¼‰
- éƒ¨ç½²åˆ° `gh-pages` åˆ†æ”¯çš„å¯¹åº”å­ç›®å½•
- ä¿ç•™å…¶ä»–åˆ†æ”¯çš„éƒ¨ç½²
- å¦‚æœæ˜¯ PRï¼Œè‡ªåŠ¨åœ¨ PR ä¸­è¯„è®ºé¢„è§ˆåœ°å€

### 3. æ¸…ç†æ—§é¢„è§ˆ (cleanup-branch-preview.yml)

**è§¦å‘æ¡ä»¶**ï¼š
- åˆ†æ”¯è¢«åˆ é™¤æ—¶è‡ªåŠ¨è§¦å‘
- æ‰‹åŠ¨è§¦å‘ï¼ˆå¯æŒ‡å®šè¦æ¸…ç†çš„åˆ†æ”¯åï¼‰

**åŠŸèƒ½**ï¼š
- ä» `gh-pages` åˆ†æ”¯ä¸­åˆ é™¤å¯¹åº”çš„é¢„è§ˆç›®å½•
- ä¿æŒ `gh-pages` åˆ†æ”¯æ•´æ´

## ğŸ› ï¸ å¼€å‘å·¥ä½œæµ

### å¼€å‘æ–°åŠŸèƒ½

1. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feat/your-feature
   ```

2. **å¼€å‘å¹¶æäº¤**
   ```bash
   # å¼€å‘ä½ çš„åŠŸèƒ½
   git add .
   git commit -m "feat: add new feature"
   ```

3. **æ¨é€åˆ° GitHub**
   ```bash
   git push origin feat/your-feature
   ```

4. **æŸ¥çœ‹é¢„è§ˆ**
   - GitHub Actions ä¼šè‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²
   - è®¿é—®ï¼š`https://ä½ çš„ç”¨æˆ·å.github.io/beanBridge/feat/your-feature/`

5. **åˆ›å»º PR**
   - åˆ›å»º PR åï¼Œæœºå™¨äººä¼šè‡ªåŠ¨è¯„è®ºé¢„è§ˆåœ°å€
   - å›¢é˜Ÿæˆå‘˜å¯ä»¥ç›´æ¥è®¿é—®é¢„è§ˆæŸ¥çœ‹æ•ˆæœ

6. **åˆå¹¶åˆ° main**
   ```bash
   # é€šè¿‡ GitHub PR ç•Œé¢åˆå¹¶
   # æˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œ
   git checkout main
   git merge feat/your-feature
   git push origin main
   ```

7. **åˆ é™¤åŠŸèƒ½åˆ†æ”¯**
   ```bash
   git branch -d feat/your-feature
   git push origin --delete feat/your-feature
   ```
   - åˆ é™¤åï¼Œæ¸…ç†å·¥ä½œæµä¼šè‡ªåŠ¨ç§»é™¤é¢„è§ˆéƒ¨ç½²

### æ‰‹åŠ¨è§¦å‘éƒ¨ç½²

1. **éƒ¨ç½²æŒ‡å®šåˆ†æ”¯**
   - è¿›å…¥ GitHub ä»“åº“
   - ç‚¹å‡» "Actions" æ ‡ç­¾
   - é€‰æ‹© "Deploy Branch Preview to GitHub Pages"
   - ç‚¹å‡» "Run workflow"
   - è¾“å…¥åˆ†æ”¯åï¼ˆå¦‚ `feat/wasm-support`ï¼‰
   - ç‚¹å‡» "Run workflow"

2. **æ¸…ç†æŒ‡å®šåˆ†æ”¯é¢„è§ˆ**
   - è¿›å…¥ GitHub ä»“åº“
   - ç‚¹å‡» "Actions" æ ‡ç­¾
   - é€‰æ‹© "Cleanup Branch Preview"
   - ç‚¹å‡» "Run workflow"
   - è¾“å…¥è¦æ¸…ç†çš„åˆ†æ”¯å
   - ç‚¹å‡» "Run workflow"

## ğŸ“ æ³¨æ„äº‹é¡¹

### WASM æ–‡ä»¶è¦æ±‚
- æ‰€æœ‰åˆ†æ”¯éƒ½å¿…é¡»åŒ…å« WASM æ–‡ä»¶æ‰èƒ½æˆåŠŸæ„å»º
- æ–‡ä»¶ä½ç½®ï¼š`public/wasm/double-entry-generator.wasm` å’Œ `public/wasm/wasm_exec.js`
- å¦‚æœç¼ºå°‘ WASM æ–‡ä»¶ï¼Œæ„å»ºä¼šå¤±è´¥å¹¶æç¤ºå¦‚ä½•ç”Ÿæˆ

### Base Path é…ç½®
- ä¸»åˆ†æ”¯ä½¿ç”¨ï¼š`/beanBridge/`
- åŠŸèƒ½åˆ†æ”¯ä½¿ç”¨ï¼š`/beanBridge/åˆ†æ”¯å/`
- Vite ä¼šè‡ªåŠ¨é…ç½®æ­£ç¡®çš„ base path

### å¹¶å‘éƒ¨ç½²
- æ¯ä¸ªåˆ†æ”¯çš„éƒ¨ç½²æ˜¯ç‹¬ç«‹çš„
- åŒä¸€åˆ†æ”¯çš„å¤šæ¬¡æ¨é€ä¼šæ’é˜Ÿæ‰§è¡Œ
- ä¸åŒåˆ†æ”¯å¯ä»¥åŒæ—¶éƒ¨ç½²

### æ–‡ä»¶ä¿ç•™
- ä½¿ç”¨ `keep_files: true` ç¡®ä¿ä¸åŒåˆ†æ”¯çš„éƒ¨ç½²äº’ä¸å½±å“
- åˆ é™¤åˆ†æ”¯æ—¶éœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼ˆæˆ–ç­‰å¾…è‡ªåŠ¨æ¸…ç†ï¼‰

## ğŸ” æ•…éšœæ’æŸ¥

### éƒ¨ç½²å¤±è´¥

1. **æ£€æŸ¥ WASM æ–‡ä»¶**
   ```bash
   ls -lh public/wasm/
   ```
   ç¡®ä¿ WASM æ–‡ä»¶å­˜åœ¨

2. **æ£€æŸ¥æ„å»ºæ—¥å¿—**
   - è¿›å…¥ Actions æ ‡ç­¾
   - æŸ¥çœ‹å¤±è´¥çš„å·¥ä½œæµ
   - æ£€æŸ¥å…·ä½“é”™è¯¯ä¿¡æ¯

3. **æœ¬åœ°æµ‹è¯•**
   ```bash
   # æµ‹è¯•åŠŸèƒ½åˆ†æ”¯æ„å»º
   yarn run build --base /beanBridge/feat/your-feature/
   
   # é¢„è§ˆæ„å»ºç»“æœ
   yarn preview
   ```

### é¢„è§ˆåœ°å€è®¿é—® 404

1. **æ£€æŸ¥åˆ†æ”¯åè½¬æ¢**
   - ç‰¹æ®Šå­—ç¬¦ä¼šè¢«æ›¿æ¢ä¸º `-`
   - `feat/wasm-support` â†’ `feat-wasm-support`

2. **ç­‰å¾…éƒ¨ç½²å®Œæˆ**
   - GitHub Pages éœ€è¦å‡ åˆ†é’Ÿæ›´æ–°
   - æ£€æŸ¥ Actions ç¡®è®¤éƒ¨ç½²æˆåŠŸ

3. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**
   - ä½¿ç”¨ Ctrl+F5 å¼ºåˆ¶åˆ·æ–°
   - æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼è®¿é—®

## ğŸ¯ æœ€ä½³å®è·µ

1. **åŠŸèƒ½åˆ†æ”¯å‘½å**
   - ä½¿ç”¨ `feat/`ã€`fix/`ã€`dev/` å‰ç¼€
   - ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼š`feat/user-auth`ã€`fix/login-bug`

2. **åŠæ—¶æ¸…ç†**
   - åˆå¹¶ååŠæ—¶åˆ é™¤åŠŸèƒ½åˆ†æ”¯
   - å®šæœŸæ£€æŸ¥ `gh-pages` åˆ†æ”¯ï¼Œæ‰‹åŠ¨æ¸…ç†é—ç•™ç›®å½•

3. **é¢„è§ˆé“¾æ¥åˆ†äº«**
   - åœ¨ PR æè¿°ä¸­åŒ…å«é¢„è§ˆé“¾æ¥
   - æ–¹ä¾¿å›¢é˜Ÿæˆå‘˜å’Œæµ‹è¯•äººå‘˜è®¿é—®

4. **ä¿æŠ¤ä¸»åˆ†æ”¯**
   - è®¾ç½® branch protection rules
   - è¦æ±‚ PR review åæ‰èƒ½åˆå¹¶
   - ç¡®ä¿ main åˆ†æ”¯ç¨³å®š

## ğŸ“š ç›¸å…³é“¾æ¥

- [GitHub Pages æ–‡æ¡£](https://docs.github.com/pages)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/actions)
- [Vite Base Path é…ç½®](https://vitejs.dev/config/shared-options.html#base)

